(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return s}});let a=r(8229),n=r(8883),l=r(3063),o=a._(r(1193));function s(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/pokedex-frontend/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=l.Image},5967:(e,t,r)=>{Promise.resolve().then(r.bind(r,9783))},9783:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),n=r(2115),l=r(8999),o=r(6874),s=r.n(o),i=r(1469),c=r.n(i);let d="https://pokeapi.co/api/v2";async function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=await fetch("".concat(d,"/pokemon?limit=").concat(e,"&offset=").concat(t));if(!r.ok)throw Error("Failed to fetch Pokemon list");return r.json()}async function g(e){let t=await fetch("".concat(d,"/pokemon/").concat(e));if(!t.ok)throw Error("Failed to fetch Pokemon: ".concat(e));return t.json()}function m(e){let t=e.match(/\/pokemon\/(\d+)\//);return t?parseInt(t[1],10):0}let h=new Map,f=null;async function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(e.length<2)return[];let r=e.toLowerCase().trim();if(h.has(r))return h.get(r).slice(0,t);f&&f.abort(),f=new AbortController;try{let e=await fetch("".concat(d,"/pokemon?limit=1000"),{signal:f.signal});if(!e.ok)throw Error("Failed to fetch Pokemon list for search");let{results:a}=await e.json(),n=a.filter(e=>e.name.toLowerCase().includes(r)).slice(0,t),l=await Promise.all(n.map(async e=>{let t=m(e.url),r=await g(t);return{id:t,name:e.name,image:r.sprites.other["official-artwork"].front_default||r.sprites.front_default||"",types:r.types.map(e=>e.type.name)}}));return h.set(r,l),l}catch(e){if(e instanceof Error&&"AbortError"===e.name)return[];throw e}}function p(e){let{searchQuery:t=""}=e,[r,l]=(0,n.useState)([]),[o,i]=(0,n.useState)([]),[d,h]=(0,n.useState)(!0),[f,x]=(0,n.useState)(null),[p,b]=(0,n.useState)(0),[y,w]=(0,n.useState)(!0),k=async e=>{try{h(!0);let t=await u(20,e),r=await Promise.all(t.results.map(async e=>{let t=m(e.url),r=await g(t);return{...e,id:t,image:r.sprites.other["official-artwork"].front_default||r.sprites.front_default||"",types:r.types.map(e=>e.type.name)}}));0===e?l(r):l(e=>[...e,...r]),w(null!==t.next)}catch(e){x(e instanceof Error?e.message:"Failed to load Pokemon")}finally{h(!1)}};(0,n.useEffect)(()=>{k(0)},[]),(0,n.useEffect)(()=>{t.trim()?i(r.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.types.some(e=>e.toLowerCase().includes(t.toLowerCase())))):i(r)},[t,r]);let v=function(e,t){let{hasMore:r,loading:a,threshold:l=100}=t,o=(0,n.useRef)(null),s=(0,n.useRef)(e),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{s.current=e},[e]);let c=(0,n.useCallback)(e=>{let[t]=e;t.isIntersecting&&r&&!a&&(i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{s.current()},100))},[r,a]);return(0,n.useEffect)(()=>{let e=o.current;if(!e)return;let t=new IntersectionObserver(c,{root:null,rootMargin:"".concat(l,"px"),threshold:.1});return t.observe(e),()=>{t.disconnect(),i.current&&clearTimeout(i.current)}},[c,l]),o}(()=>{let e=p+20;b(e),k(e)},{hasMore:y&&!t.trim(),loading:d,threshold:100}),j=t.trim().length>0,N=!j&&y,E=e=>({normal:"bg-gray-400",fire:"bg-red-500",water:"bg-blue-500",electric:"bg-yellow-400",grass:"bg-green-500",ice:"bg-blue-300",fighting:"bg-red-700",poison:"bg-purple-500",ground:"bg-yellow-600",flying:"bg-indigo-400",psychic:"bg-pink-500",bug:"bg-green-400",rock:"bg-yellow-800",ghost:"bg-purple-700",dragon:"bg-indigo-700",dark:"bg-gray-800",steel:"bg-gray-500",fairy:"bg-pink-300"})[e]||"bg-gray-400";return f?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsxs)("p",{className:"text-red-600 dark:text-red-400 text-lg",children:["Error: ",f]}),(0,a.jsx)("button",{onClick:()=>k(0),className:"mt-4 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"})]}):(0,a.jsxs)("div",{children:[j&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:0===o.length?'No Pok\xe9mon found matching "'.concat(t,'"'):"Found ".concat(o.length,' Pok\xe9mon matching "').concat(t,'"')})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",role:"grid","aria-label":"Pokemon list",children:o.map(e=>(0,a.jsx)(s(),{href:"/pokemon/".concat(e.id),className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"relative h-32 mb-3",children:e.image&&(0,a.jsx)(c(),{src:e.image,alt:e.name,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:["#",e.id.toString().padStart(3,"0")]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white capitalize mb-2",children:e.name}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-1",children:e.types.map(e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-white rounded-full ".concat(E(e)),children:e},e))})]})]})},e.id))}),N&&(0,a.jsx)("div",{ref:v,className:"flex justify-center items-center py-12","aria-label":"Loading more Pokemon",role:"status","aria-live":"polite",children:d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600","aria-hidden":"true"}),(0,a.jsx)("p",{className:"ml-4 text-gray-600 dark:text-gray-400",children:"Loading more Pok\xe9mon..."})]})}),!d&&!y&&!j&&(0,a.jsx)("div",{className:"text-center mt-12",role:"status","aria-live":"polite",children:(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You've seen all the Pok\xe9mon! \uD83C\uDF89"})})]})}let b=n.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),y=n.forwardRef(function(e,t){let{title:r,titleId:a,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))});function w(e){let{suggestions:t,onSelect:r,query:l}=e,[o,s]=(0,n.useState)(-1),i=e=>({normal:"bg-gray-400",fire:"bg-red-500",water:"bg-blue-500",electric:"bg-yellow-400",grass:"bg-green-500",ice:"bg-blue-300",fighting:"bg-red-700",poison:"bg-purple-500",ground:"bg-yellow-600",flying:"bg-indigo-400",psychic:"bg-pink-500",bug:"bg-green-400",rock:"bg-yellow-800",ghost:"bg-purple-700",dragon:"bg-indigo-700",dark:"bg-gray-800",steel:"bg-gray-500",fairy:"bg-pink-300"})[e]||"bg-gray-400",d=(e,t)=>{if(!t)return e;let r=RegExp("(".concat(t,")"),"gi");return e.split(r).map((e,t)=>r.test(e)?(0,a.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-600 text-gray-900 dark:text-white",children:e},t):e)};return((0,n.useEffect)(()=>{s(-1)},[t]),(0,n.useEffect)(()=>{let e=e=>{switch(e.key){case"ArrowDown":e.preventDefault(),s(e=>e<t.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),s(e=>e>0?e-1:e);break;case"Enter":e.preventDefault(),o>=0&&o<t.length&&r(t[o]);break;case"Escape":s(-1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,t,r]),0===t.length)?null:(0,a.jsx)("div",{id:"autocomplete-dropdown",className:"absolute top-full left-0 right-0 z-50 mt-1 bg-white dark:bg-gray-800  border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg  overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200",role:"listbox","aria-label":"Search suggestions",children:t.map((e,t)=>(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full px-4 py-3 flex items-center space-x-3 hover:bg-gray-50 \n                     dark:hover:bg-gray-700 transition-colors duration-150 text-left\n                     ".concat(o===t?"bg-blue-50 dark:bg-blue-900/20":"","\n                     ").concat(0===t?"":"border-t border-gray-100 dark:border-gray-700"),role:"option","aria-selected":o===t,tabIndex:-1,children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-12 h-12 relative",children:e.image&&(0,a.jsx)(c(),{src:e.image,alt:e.name,fill:!0,className:"object-contain",sizes:"48px"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white capitalize",children:d(e.name,l)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",e.id.toString().padStart(3,"0")]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 ml-2",children:e.types.slice(0,2).map(e=>(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium text-white rounded-full ".concat(i(e)),children:e},e))})]})})]},e.id))})}function k(e){var t;let r,{onSearch:l,onSelectPokemon:o,placeholder:s="Search Pok\xe9mon..."}=e,[i,c]=(0,n.useState)(""),[d,u]=(0,n.useState)([]),[g,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),p=(0,n.useRef)(null),k=(0,n.useRef)(null),v=(t=async e=>{if(e.length<2){u([]),f(!1),m(!1);return}try{m(!0);let t=await x(e,5);u(t),f(t.length>0)}catch(e){console.error("Search error:",e),u([]),f(!1)}finally{m(!1)}},function(){for(var e=arguments.length,a=Array(e),n=0;n<e;n++)a[n]=arguments[n];clearTimeout(r),r=setTimeout(()=>t(...a),300)});return(0,n.useEffect)(()=>{let e=e=>{k.current&&!k.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{ref:k,className:"relative w-full max-w-lg mx-auto",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(b,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})}),(0,a.jsx)("input",{ref:p,type:"text",value:i,onChange:e=>{let t=e.target.value;c(t),l(t),t.length>=2?(m(!0),v(t)):(u([]),f(!1),m(!1))},onKeyDown:e=>{if("Escape"===e.key){var t;f(!1),null==(t=p.current)||t.blur()}},onFocus:()=>d.length>0&&f(!0),placeholder:s,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg  bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm hover:shadow-md transition-shadow duration-200","aria-label":"Search Pok\xe9mon","aria-expanded":h,"aria-haspopup":"listbox","aria-autocomplete":"list","aria-controls":"autocomplete-dropdown",role:"combobox"}),(i||g)&&(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:g?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600","aria-hidden":"true",role:"status","aria-label":"Searching"}):(0,a.jsx)("button",{onClick:()=>{var e;c(""),u([]),f(!1),m(!1),l(""),null==(e=p.current)||e.focus()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300  transition-colors duration-200 focus:outline-none focus:ring-2  focus:ring-blue-500 rounded-full p-1","aria-label":"Clear search",type:"button",children:(0,a.jsx)(y,{className:"h-4 w-4","aria-hidden":"true"})})})]}),h&&(0,a.jsx)(w,{suggestions:d,onSelect:e=>{c(e.name),f(!1),o(e)},query:i})]})}function v(){let[e,t]=(0,n.useState)(""),r=(0,l.useRouter)();return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-gray-800 dark:text-white mb-4",children:"Pok\xe9dex"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-8",children:"Discover and explore the world of Pok\xe9mon"})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(k,{onSearch:e=>{t(e)},onSelectPokemon:e=>{r.push("/pokemon/".concat(e.id))},placeholder:"Search Pok\xe9mon..."})}),(0,a.jsx)("main",{children:(0,a.jsx)(p,{searchQuery:e})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,441,684,358],()=>t(5967)),_N_E=e.O()}]);